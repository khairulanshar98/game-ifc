"use strict";(self.webpackChunkgame=self.webpackChunkgame||[]).push([[973],{7973:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var n=r(2791),i=r(8560),a=r(1507),o=r(6e3),s=r(4871),c=r(23),l=r(1889),d=r(7205),u=r(885),h=r(3985),p=r(7827),f=function(e){var t=(0,h.qp)(),r=(0,u.Z)(t,2),i=r[0],a=r[1],o=n.useRef(null),s=n.useState(void 0),c=(0,u.Z)(s,2),l=c[0],d=c[1],f=n.useState(null),g=(0,u.Z)(f,2),m=g[0],v=g[1],x=n.useState(i.theme),j=(0,u.Z)(x,2),Z=j[0],E=j[1];n.useEffect((function(){Z&&a({type:p.U.SET_THEME,data:{theme:Z}})}),[a,Z]);return{store:i,toggleColorMode:function(){E((function(e){return"light"===e?"dark":"light"}))},mode:Z,fileInput:o,onFileChange:function(){if(o.current.files&&o.current.files[0])if(o.current.files[0].size<=5242880){var e=URL.createObjectURL(o.current.files[0]);v(e)}else d("File size is too big. Please select file with size <= 5 MB")},handleClickOpen:function(){var e;d(void 0),null===o||void 0===o||null===(e=o.current)||void 0===e||e.click()},error:l,filePath:m}},g=r(4942),m=r(9367),v="".concat("MicroGame","_home"),x={root:"".concat(v,"-root"),group:"".concat(v,"-group"),label:"".concat(v,"-label"),file:"".concat(v,"-file")},j=(0,m.ZP)("section")((function(e){var t,r=e.theme;return t={},(0,g.Z)(t,"&.".concat(x.root),{width:"100%",padding:r.spacing(2),margin:0}),(0,g.Z)(t,"& .".concat(x.group),{padding:0,margin:0}),(0,g.Z)(t,"& .".concat(x.label),{display:"flex",marginLeft:r.spacing(1),"& strong":{marginRight:r.spacing(1)}}),(0,g.Z)(t,"& .".concat(x.file),{visibility:"hidden",width:"0px",display:"inline-block"}),t})),Z=r(5671),E=r(3144),S=r(136),b=r(3668),k={root:"".concat("Fallback","-root")},_=(0,m.ZP)("div")((function(e){var t=e.theme;return(0,g.Z)({},"&.".concat(k.root),{width:"100%",padding:t.spacing(2)})})),y=r(1413),C=r(1044),T=r(5405),M=C.ZP.create({headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Accept:"application/json, text/plain"},timeout:6e4});M.interceptors.request.use((function(e){return(0,(0,T.T)().baseDispatch)({type:p.U.SET_IS_LOADING,data:{isLoading:!0}}),e}));M.interceptors.response.use((function(e){var t=(0,T.T)().baseDispatch;return e&&e.headers&&e.headers.Authorization&&(M.defaults.headers.common.Authorization="Bearer ".concat(e.headers.token),t({type:p.U.SET_TOKEN,data:{token:e.headers.token}})),t({type:p.U.SET_ERRORMSG,data:{errorMsg:void 0}}),t({type:p.U.SET_IS_LOADING,data:{isLoading:!1}}),e}),(function(e){var t=(0,T.T)().baseDispatch,r=e.message;e.response&&e.response.data&&(r=e.response.data.message);return t({type:p.U.SET_ERRORMSG,data:{errorMsg:r}}),t({type:p.U.SET_IS_LOADING,data:{isLoading:!1}}),Promise.reject((0,y.Z)({},e))}));var N=function(e){var t=n.useState(),r=(0,u.Z)(t,2),i=r[0],a=r[1],o=n.useState(),s=(0,u.Z)(o,2),c=s[0],l=s[1],d=n.useState(),h=(0,u.Z)(d,2),p=h[0],f=h[1];return n.useEffect((function(){e.error&&(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return M.put("/api",t,{signal:r})}("/error",(0,y.Z)({},e.error)).catch((function(e){})),l(e.error.message),a(e.error.name),f(e.error.stack))}),[e.error]),{errorMessage:c,errorName:i,errorStack:p}},P=r(184),w=function(e){var t=N(e),r=t.errorMessage,n=t.errorName,i=t.errorStack;return(0,P.jsxs)(_,{className:k.root,"data-testid":"FallbackError__page-id",children:[(0,P.jsx)("div",{children:(0,P.jsx)("strong",{children:n})}),(0,P.jsx)("div",{children:r}),(0,P.jsx)("div",{children:i})]})},L=function(e){(0,S.Z)(r,e);var t=(0,b.Z)(r);function r(e){var n;return(0,Z.Z)(this,r),(n=t.call(this,e)).state={hasError:!1,error:void 0},n.state={hasError:!1},n}return(0,E.Z)(r,[{key:"render",value:function(){return this.state.hasError?(0,P.jsx)(w,{error:this.state.error}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),r}(n.Component),I=function(e){return(0,P.jsx)(L,{children:e.children})},R="".concat("MicroGame","_canvas"),O={root:"".concat(R,"-root")},U=(0,m.ZP)("section")((function(e){e.theme;return(0,g.Z)({},"&.".concat(O.root),{width:"100%",padding:0,margin:0,"& canvas":{width:"100% !important",height:"calc(100vh - 88px) !important",outline:"none !important"}})})),F=function(e){return n.useEffect((function(){setTimeout((function(){try{var e=document.createElement("script");e.src="https://ifcjs.github.io/hello-world/examples/web-ifc-three/helloworld/bundle.js",e.type="text/javascript",e.async=!0,document.head.appendChild(e),e.addEventListener("load",(function(){console.log("script loaded successfully")}))}catch(t){console.error("error inserting script",t)}}),1e3)}),[]),(0,P.jsx)(I,{children:(0,P.jsx)(U,{className:O.root,"data-testid":"Canvas__page-id",children:(0,P.jsx)("canvas",{id:"three-canvas"})})})},D=function(e){var t,r,n,u=f(e),h=u.store,p=u.toggleColorMode,g=u.mode,m=u.fileInput,v=u.handleClickOpen,Z=(u.onFileChange,u.filePath);return(0,P.jsx)(I,{children:(0,P.jsxs)(j,{className:x.root,"data-testid":"Home__page-id",children:[(0,P.jsxs)(s.Z,{children:[(0,P.jsx)("input",{className:x.file,ref:m,id:"file-input",type:"file",accept:".ifc, .ifcXML, .ifcZIP"}),(0,P.jsxs)(i.ZP,{container:!0,spacing:0,children:[(0,P.jsx)(i.ZP,{item:!0,xs:6,children:(0,P.jsx)(c.Z,{className:x.group,control:(0,P.jsx)(l.Z,{"data-testid":"Home__switch-id",checked:"light"===g,onChange:p}),label:(0,P.jsxs)("span",{className:x.label,children:[(0,P.jsx)("strong",{children:h.theme}),"light"===g?(0,P.jsx)(o.Z,{}):(0,P.jsx)(a.Z,{})]})})}),(0,P.jsx)(i.ZP,{item:!0,xs:6,children:(0,P.jsx)(c.Z,{control:(0,P.jsx)(d.Z,{size:"small",variant:"contained",color:"secondary",onClick:function(e){return v()},children:"Select IFC File"}),label:(0,P.jsx)("span",{className:x.label,children:(null===m||void 0===m||null===(t=m.current)||void 0===t?void 0:t.files)&&(null===m||void 0===m||null===(r=m.current)||void 0===r?void 0:r.files[0])&&(null===m||void 0===m||null===(n=m.current)||void 0===n?void 0:n.files[0].name)})})})]})]}),(0,P.jsx)(F,{filePath:Z})]})})}}}]);
//# sourceMappingURL=973.86e62234.chunk.js.map